/*
 Galleria v 1.2.6 2011-12-12
 http://galleria.aino.se

 Copyright (c) 2011, Aino
 Licensed under the MIT license.
*/
(function(a){var b=this,c=b.document,d=a(c),e=a(b),f=!0,g=3e4,h=!1,i=navigator.userAgent.toLowerCase(),j=b.location.hash.replace(/#\//,""),k=function(){var a=3,b=c.createElement("div"),d=b.getElementsByTagName("i");do b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->";while(d[0]);return a>4?a:void 0}(),l=function(){return{html:c.documentElement,body:c.body,head:c.getElementsByTagName("head")[0],title:c.title}},m=function(){var b=[];return a.each("data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image".split(" "),function(a,c){b.push(c),/_/.test(c)&&b.push(c.replace(/_/g,""))}),b}(),n=function(b){var c;return typeof b!="object"?b:(a.each(b,function(d,e){/^[a-z]+_/.test(d)&&(c="",a.each(d.split("_"),function(a,b){c+=a>0?b.substr(0,1).toUpperCase()+b.substr(1):b}),b[c]=e,delete b[d])}),b)},o=function(b){return a.inArray(b,m)>-1?Galleria[b.toUpperCase()]:b},p={trunk:{},add:function(a,c,d,e){e=e||!1,this.clear(a);if(e)var f=c,c=function(){f(),p.add(a,c,d)};this.trunk[a]=b.setTimeout(c,d)},clear:function(a){var c=function(a){b.clearTimeout(this.trunk[a]),delete this.trunk[a]},d;if(a&&a in this.trunk)c.call(p,a);else if(typeof a=="undefined")for(d in this.trunk)this.trunk.hasOwnProperty(d)&&c.call(p,d)}},q=[],r=[],s=!1,t=!1,u=[],v=function(b){Galleria.theme=b,a.each(u,function(a,b){b._initialized||b._init.call(b)})},w=function(){return{array:function(a){return Array.prototype.slice.call(a,0)},create:function(a,b){var d=c.createElement(b||"div");return d.className=a,d},getScriptPath:function(b){return b=b||a("script:last").attr("src"),b=b.split("/"),b.length==1?"":(b.pop(),b.join("/")+"/")},animate:function(){var d=function(a){var c="transition WebkitTransition MozTransition OTransition".split(" "),d;if(b.opera)return!1;for(d=0;c[d];d++)if(typeof a[c[d]]!="undefined")return c[d];return!1}((c.body||c.documentElement).style),e={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[d],f={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},g=function(b,c,d){var e={},d=d||"transition";a.each("webkit moz ms o".split(" "),function(){e["-"+this+"-"+d]=c}),b.css(e)},h=function(a){g(a,"none","transition"),Galleria.WEBKIT&&Galleria.TOUCH&&(g(a,"translate3d(0,0,0)","transform"),a.data("revert")&&(a.css(a.data("revert")),a.data("revert",null)))},i,j,k,l,m,n,o;return function(c,p,q){q=a.extend({duration:400,complete:function(){},stop:!1},q),c=a(c),q.duration?d?(q.stop&&(c.unbind(e),h(c)),i=!1,a.each(p,function(a,b){o=c.css(a),w.parseValue(o)!=w.parseValue(b)&&(i=!0),c.css(a,o)}),i?(j=[],k=q.easing in f?f[q.easing]:f._default,l=" "+q.duration+"ms cubic-bezier("+k.join(",")+")",b.setTimeout(function(){c.one(e,function(a){return function(){h(a),q.complete.call(a[0])}}(c)),Galleria.WEBKIT&&Galleria.TOUCH&&(m={},n=[0,0,0],a.each(["left","top"],function(a,b){b in p&&(n[a]=w.parseValue(p[b])-w.parseValue(c.css(b))+"px",m[b]=p[b],delete p[b])}),n[0]||n[1])&&(c.data("revert",m),j.push("-webkit-transform"+l),g(c,"translate3d("+n.join(",")+")","transform")),a.each(p,function(a){j.push(a+l)}),g(c,j.join(",")),c.css(p)},1)):b.setTimeout(function(){q.complete.call(c[0])},q.duration)):c.animate(p,q):(c.css(p),q.complete.call(c[0]))}}(),removeAlpha:function(a){if(k<9&&a){var b=a.style,a=(a=a.currentStyle)&&a.filter||b.filter||"";/alpha/.test(a)&&(b.filter=a.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(b,c){b=a(b),b.attr("style")&&b.data("styles",b.attr("style")).removeAttr("style"),b.css(c)},revertStyles:function(){a.each(w.array(arguments),function(b,c){c=a(c),c.removeAttr("style"),c.attr("style",""),c.data("styles")&&c.attr("style",c.data("styles")).data("styles",null)})},moveOut:function(a){w.forceStyles(a,{position:"absolute",left:-1e4})},moveIn:function(){w.revertStyles.apply(w,w.array(arguments))},elem:function(b){return b instanceof a?{$:b,dom:b[0]}:{$:a(b),dom:b}},hide:function(a,b,c){var c=c||function(){},d=w.elem(a),e=d.$,a=d.dom;e.data("opacity")||e.data("opacity",e.css("opacity")),d={opacity:0},b?w.animate(a,d,{duration:b,complete:k<9&&a?function(){w.removeAlpha(a),a.style.visibility="hidden",c.call(a)}:c,stop:!0}):k<9&&a?(w.removeAlpha(a),a.style.visibility="hidden"):e.css(d)},show:function(a,b,c){var c=c||function(){},d=w.elem(a),e=d.$,a=d.dom,f={opacity:parseFloat(e.data("opacity"))||1};b?(k<9&&(e.css("opacity",0),a.style.visibility="visible"),w.animate(a,f,{duration:b,complete:k<9&&a?function(){f.opacity==1&&w.removeAlpha(a),c.call(a)}:c,stop:!0})):k<9&&f.opacity==1&&a?(w.removeAlpha(a),a.style.visibility="visible"):e.css(f)},optimizeTouch:function(){var b,c,d,e,f={},g=function(b){b.preventDefault(),f=a.extend({},b,!0)},h=function(){this.evt=f},i=function(){this.handler.call(b,this.evt)};return function(f){a(f).bind("touchend",function(f){b=f.target;for(e=!0;b.parentNode&&b!=f.currentTarget&&e;)c=a(b).data("events"),d=a(b).data("fakes"),c&&"click"in c?(e=!1,f.preventDefault(),a(b).click(g).click(),c.click.pop(),a.each(c.click,h),a(b).data("fakes",c.click),delete c.click):d&&(e=!1,f.preventDefault(),a.each(d,i)),b=b.parentNode})}}(),addTimer:function(){return p.add.apply(p,w.array(arguments)),this},clearTimer:function(){return p.clear.apply(p,w.array(arguments)),this},wait:function(c){var c=a.extend({until:function(){return!1},success:function(){},error:function(){Galleria.raise("Could not complete wait function.")},timeout:3e3},c),d=w.timestamp(),e,f,g=function(){f=w.timestamp(),e=f-d;if(c.until(e))return c.success(),!1;if(f>=d+c.timeout)return c.error(),!1;b.setTimeout(g,10)};b.setTimeout(g,10)},toggleQuality:function(a,b){(k===7||k===8)&&a&&(typeof b=="undefined"&&(b=a.style.msInterpolationMode==="nearest-neighbor"),a.style.msInterpolationMode=b?"bicubic":"nearest-neighbor")},insertStyleTag:function(a){var b=c.createElement("style");l().head.appendChild(b),b.styleSheet?b.styleSheet.cssText=a:(a=c.createTextNode(a),b.appendChild(a))},loadScript:function(b,c){var d=!1,e=a("<script>").attr({src:b,async:!0}).get(0);e.onload=e.onreadystatechange=function(){!d&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(d=!0,e.onload=e.onreadystatechange=null,typeof c=="function"&&c.call(this,this))},l().head.appendChild(e)},parseValue:function(a){return typeof a=="number"?a:typeof a=="string"?(a=a.match(/\-?\d|\./g))&&a.constructor===Array?a.join("")*1:0:0},timestamp:function(){return(new Date).getTime()},loadCSS:function(d,e,f){var g,h=!1,i;return a("link[rel=stylesheet]").each(function(){if(RegExp(d).test(this.href))return g=this,!1}),typeof e=="function"&&(f=e,e=void 0),f=f||function(){},g?(f.call(g,g),g):(i=c.styleSheets.length,a("#"+e).length?(a("#"+e).attr("href",d),i--,h=!0):(g=a("<link>").attr({rel:"stylesheet",href:d,id:e}).get(0),b.setTimeout(function(){var b=a('link[rel="stylesheet"], style');b.length?b.get(0).parentNode.insertBefore(g,b[0]):l().head.appendChild(g),k?i>=31?Galleria.raise("You have reached the browser stylesheet limit (31)",!0):g.onreadystatechange=function(){!h&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(h=!0)}:/file:\/\//i.test(d)?h=!0:a.ajax({url:d,success:function(){h=!0},error:function(a){a.isRejected()&&Galleria.WEBKIT&&(h=!0)}})},10)),typeof f=="function"&&w.wait({until:function(){return h&&c.styleSheets.length>i},success:function(){b.setTimeout(function(){f.call(g,g)},100)},error:function(){Galleria.raise("Theme CSS could not load",!0)},timeout:1e4}),g)}}}(),x=function(){var b=function(b,c,d,e){var f=this.getOptions("easing"),g=this.getStageWidth(),h={left:g*(b.rewind?-1:1)},i={left:0};d?(h.opacity=0,i.opacity=1):h.opacity=1,a(b.next).css(h),w.animate(b.next,i,{duration:b.speed,complete:function(a){return function(){c(),a.css({left:0})}}(a(b.next).add(b.prev)),queue:!1,easing:f}),e&&(b.rewind=!b.rewind),b.prev&&(h={left:0},i={left:g*(b.rewind?1:-1)},d&&(h.opacity=1,i.opacity=0),a(b.prev).css(h),w.animate(b.prev,i,{duration:b.speed,queue:!1,easing:f,complete:function(){a(this).css("opacity",0)}}))};return{fade:function(b,c){a(b.next).css({opacity:0,left:0}).show(),w.animate(b.next,{opacity:1},{duration:b.speed,complete:c}),b.prev&&(a(b.prev).css("opacity",1).show(),w.animate(b.prev,{opacity:0},{duration:b.speed}))},flash:function(b,c){a(b.next).css({opacity:0,left:0}),b.prev?w.animate(b.prev,{opacity:0},{duration:b.speed/2,complete:function(){w.animate(b.next,{opacity:1},{duration:b.speed,complete:c})}}):w.animate(b.next,{opacity:1},{duration:b.speed,complete:c})},pulse:function(b,c){b.prev&&a(b.prev).hide(),a(b.next).css({opacity:0,left:0}).show(),w.animate(b.next,{opacity:1},{duration:b.speed,complete:c})},slide:function(a,c){b.apply(this,w.array(arguments))},fadeslide:function(a,c){b.apply(this,w.array(arguments).concat([!0]))},doorslide:function(a,c){b.apply(this,w.array(arguments).concat([!1,!0]))}}}();Galleria=function(){var c=this;this._theme=void 0,this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._firstrun=this._initialized=!1,this._stageHeight=this._stageWidth=0,this._target=void 0,this._id=Math.random(),a.each("container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip".split(" "),function(a,b){c._dom[b]=w.create("galleria-"+b)}),a.each("current total".split(" "),function(a,b){c._dom[b]=w.create("galleria-"+b,"span")});var f=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(a){var b=a.keyCode||a.which;b in f.map&&typeof f.map[b]=="function"&&f.map[b].call(c,a)},attach:function(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=b.toUpperCase(),c in f.keys?f.map[f.keys[c]]=a[b]:f.map[c]=a[b]);f.bound||(f.bound=!0,d.bind("keydown",f.press))},detach:function(){f.bound=!1,f.map={},d.unbind("keydown",f.press)}},g=this._controls={0:void 0,1:void 0,active:0,swap:function(){g.active=g.active?0:1},getActive:function(){return g[g.active]},getNext:function(){return g[1-g.active]}},h=this._carousel={next:c.$("thumb-nav-right"),prev:c.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var b=0,d=0,e=[0];a.each(c._thumbnails,function(c,f){f.ready&&(b+=f.outerWidth||a(f.container).outerWidth(!0),e[c+1]=b,d=Math.max(d,f.outerHeight||a(f.container).outerHeight(!0)))}),c.$("thumbnails").css({width:b,height:d}),h.max=b,h.hooks=e,h.width=c.$("thumbnails-list").width(),h.setClasses(),c.$("thumbnails-container").toggleClass("galleria-carousel",b>h.width),h.width=c.$("thumbnails-list").width()},bindControls:function(){var a;h.next.bind("click",function(b){b.preventDefault();if(c._options.carouselSteps==="auto"){for(a=h.current;a<h.hooks.length;a++)if(h.hooks[a]-h.hooks[h.current]>h.width){h.set(a-2);break}}else h.set(h.current+c._options.carouselSteps)}),h.prev.bind("click",function(b){b.preventDefault();if(c._options.carouselSteps==="auto")for(a=h.current;a>=0;a--){if(h.hooks[h.current]-h.hooks[a]>h.width){h.set(a+2);break}if(a===0){h.set(0);break}}else h.set(h.current-c._options.carouselSteps)})},set:function(a){for(a=Math.max(a,0);h.hooks[a-1]+h.width>=h.max&&a>=0;)a--;h.current=a,h.animate()},getLast:function(a){return(a||h.current)-1},follow:function(a){if(a===0||a===h.hooks.length-2)h.set(a);else{for(var b=h.current;h.hooks[b]-h.hooks[h.current]<h.width&&b<=h.hooks.length;)b++;a-1<h.current?h.set(a-1):a+2>b&&h.set(a-b+h.current+2)}},setClasses:function(){h.prev.toggleClass("disabled",!h.current),h.next.toggleClass("disabled",h.hooks[h.current]+h.width>=h.max)},animate:function(){h.setClasses();var a=h.hooks[h.current]*-1;isNaN(a)||w.animate(c.get("thumbnails"),{left:a},{duration:c._options.carouselSpeed,easing:c._options.easing,queue:!1})}},i=this._tooltip={initialized:!1,open:!1,init:function(){i.initialized=!0,w.insertStyleTag(".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}"),c.$("tooltip").css("opacity",.8),w.hide(c.get("tooltip"))},move:function(a){var b=c.getMousePosition(a).x,a=c.getMousePosition(a).y,d=c.$("tooltip"),e=a,f=d.outerHeight(!0)+1,g=d.outerWidth(!0),h=f+15,g=c.$("container").width()-g-2,f=c.$("container").height()-f-2;!isNaN(b)&&!isNaN(e)&&(b+=10,e-=30,b=Math.max(0,Math.min(g,b)),e=Math.max(0,Math.min(f,e)),a<h&&(e=h),d.css({left:b,top:e}))},bind:function(b,d){if(!Galleria.TOUCH){i.initialized||i.init();var e=function(b,d){i.define(b,d),a(b).hover(function(){w.clearTimer("switch_tooltip"),c.$("container").unbind("mousemove",i.move).bind("mousemove",i.move).trigger("mousemove"),i.show(b),Galleria.utils.addTimer("tooltip",function(){c.$("tooltip").stop().show().animate({opacity:1}),i.open=!0},i.open?0:500)},function(){c.$("container").unbind("mousemove",i.move),w.clearTimer("tooltip"),c.$("tooltip").stop().animate({opacity:0},200,function(){c.$("tooltip").hide(),w.addTimer("switch_tooltip",function(){i.open=!1},1e3)})})};typeof d=="string"?e(b in c._dom?c.get(b):b,d):a.each(b,function(a,b){e(c.get(a),b)})}},show:function(d){var d=a(d in c._dom?c.get(d):d),e=d.data("tt"),f=function(a){b.setTimeout(function(a){return function(){i.move(a)}}(a),10),d.unbind("mouseup",f)};if(e=typeof e=="function"?e():e)c.$("tooltip").html(e.replace(/\s/,"&nbsp;")),d.bind("mouseup",f)},define:function(b,d){if(typeof d!="function")var e=d,d=function(){return e};b=a(b in c._dom?c.get(b):b).data("tt",d),i.show(b)}},j=this._fullscreen={scrolled:0,crop:void 0,transition:void 0,active:!1,keymap:c._keyboard.map,enter:function(b){j.active=!0,w.hide(c.getActiveImage()),c.$("container").addClass("fullscreen"),j.scrolled=e.scrollTop(),w.forceStyles(c.get("container"),{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4});var d={height:"100%",overflow:"hidden",margin:0,padding:0},f=c.getData(),g=c._options;w.forceStyles(l().html,d),w.forceStyles(l().body,d),j.keymap=a.extend({},c._keyboard.map),c.attachKeyboard({escape:c.exitFullscreen,right:c.next,left:c.prev}),j.crop=g.imageCrop,g.fullscreenCrop!=void 0&&(g.imageCrop=g.fullscreenCrop);if(f&&f.big&&f.image!==f.big){var d=new Galleria.Picture,h=d.isCached(f.big),i=c.getIndex(),k=c._thumbnails[i];c.trigger({type:Galleria.LOADSTART,cached:h,rewind:!1,index:i,imageTarget:c.getActiveImage(),thumbTarget:k}),d.load(f.big,function(b){c._scaleImage(b,{complete:function(b){c.trigger({type:Galleria.LOADFINISH,cached:h,index:i,rewind:!1,imageTarget:b.image,thumbTarget:k});var d=c._controls.getActive().image;d&&a(d).width(b.image.width).height(b.image.height).attr("style",a(b.image).attr("style")).attr("src",b.image.src)}})})}c.rescale(function(){w.addTimer("fullscreen_enter",function(){w.show(c.getActiveImage()),typeof b=="function"&&b.call(c)},100),c.trigger(Galleria.FULLSCREEN_ENTER)}),e.resize(function(){j.scale()})},scale:function(){c.rescale()},exit:function(a){j.active=!1,w.hide(c.getActiveImage()),c.$("container").removeClass("fullscreen"),w.revertStyles(c.get("container"),l().html,l().body),b.scrollTo(0,j.scrolled),c.detachKeyboard(),c.attachKeyboard(j.keymap),c._options.imageCrop=j.crop;var d=c.getData().big,f=c._controls.getActive().image;d&&d==f.src&&b.setTimeout(function(a){return function(){f.src=a}}(c.getData().image),1),c.rescale(function(){w.addTimer("fullscreen_exit",function(){w.show(c.getActiveImage()),typeof a=="function"&&a.call(c)},50),c.trigger(Galleria.FULLSCREEN_EXIT)}),e.unbind("resize",j.scale)}},m=this._idle={trunk:[],bound:!1,add:function(b,c){if(b){m.bound||m.addEvent();var b=a(b),d={},e;for(e in c)c.hasOwnProperty(e)&&(d[e]=b.css(e));b.data("idle",{from:d,to:c,complete:!0,busy:!1}),m.addTimer(),m.trunk.push(b)}},remove:function(b){b=jQuery(b),a.each(m.trunk,function(a,d){d.length&&!d.not(b).length&&(c._idle.show(b),c._idle.trunk.splice(a,1))}),m.trunk.length||(m.removeEvent(),w.clearTimer("idle"))},addEvent:function(){m.bound=!0,c.$("container").bind("mousemove click",m.showAll)},removeEvent:function(){m.bound=!1,c.$("container").unbind("mousemove click",m.showAll)},addTimer:function(){w.addTimer("idle",function(){c._idle.hide()},c._options.idleTime)},hide:function(){c._options.idleMode&&(c.trigger(Galleria.IDLE_ENTER),a.each(m.trunk,function(a,b){var d=b.data("idle");d&&(b.data("idle").complete=!1,w.animate(b,d.to,{duration:c._options.idleSpeed}))}))},showAll:function(){w.clearTimer("idle"),a.each(c._idle.trunk,function(a,b){c._idle.show(b)})},show:function(b){var d=b.data("idle");!d.busy&&!d.complete&&(d.busy=!0,c.trigger(Galleria.IDLE_EXIT),w.clearTimer("idle"),w.animate(b,d.from,{duration:c._options.idleSpeed/2,complete:function(){a(this).data("idle").busy=!1,a(this).data("idle").complete=!0}})),m.addTimer()}},n=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){c.trigger(Galleria.LIGHTBOX_OPEN);if(!n.initialized){n.initialized=!0;var b={},d=c._options,e="",d={overlay:"position:fixed;display:none;opacity:"+d.overlayOpacity+";filter:alpha(opacity="+d.overlayOpacity*100+");top:0;left:0;width:100%;height:100%;background:"+d.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:"position:absolute;background:#000;width:100%;height:100%;",content:"position:absolute;background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:"position:absolute;bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:"position:absolute;top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:"position:absolute;top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:"position:absolute;width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:"position:absolute;width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:"position:absolute;top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:"position:absolute;top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},f={};k===8&&(d.nextholder+="background:#000;filter:alpha(opacity=0);",d.prevholder+="background:#000;filter:alpha(opacity=0);"),a.each(d,function(a,b){e+=".galleria-lightbox-"+a+"{"+b+"}"}),w.insertStyleTag(e),a.each("overlay box content shadow title info close prevholder prev nextholder next counter image".split(" "),function(a,d){c.addElement("lightbox-"+d),b[d]=n.elems[d]=c.get("lightbox-"+d)}),n.image=new Galleria.Picture,a.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(b,c){var d=[];a.each(c.split(" "),function(a,b){d.push("lightbox-"+b)}),f["lightbox-"+b]=d}),c.append(f),a(b.image).append(n.image.container),a(l().body).append(b.overlay,b.box),w.optimizeTouch(b.box),function(b){return b.hover(function(){a(this).css("color","#bbb")},function(){a(this).css("color","#444")})}(a(b.close).bind("click",n.hide).html("&#215;")),a.each(["Prev","Next"],function(c,d){var e=a(b[d.toLowerCase()]).html(/v/.test(d)?"&#8249;&nbsp;":"&nbsp;&#8250;"),f=a(b[d.toLowerCase()+"holder"]);f.bind("click",function(){n["show"+d]()}),k<8||Galleria.TOUCH?e.show():f.hover(function(){e.show()},function(){e.stop().fadeOut(200)})}),a(b.overlay).bind("click",n.hide),Galleria.IPAD&&(c._options.lightboxTransitionSpeed=0)}},rescale:function(b){var d=Math.min(e.width()-40,n.width),f=Math.min(e.height()-60,n.height),f=Math.min(d/n.width,f/n.height),d=Math.round(n.width*f)+40,f=Math.round(n.height*f)+60,d={width:d,height:f,"margin-top":Math.ceil(f/2)*-1,"margin-left":Math.ceil(d/2)*-1};b?a(n.elems.box).css(d):a(n.elems.box).animate(d,{duration:c._options.lightboxTransitionSpeed,easing:c._options.easing,complete:function(){var b=n.image,d=c._options.lightboxFadeSpeed;c.trigger({type:Galleria.LIGHTBOX_IMAGE,imageTarget:b.image}),a(b.container).show(),w.show(b.image,d),w.show(n.elems.info,d)}})},hide:function(){n.image.image=null,e.unbind("resize",n.rescale),a(n.elems.box).hide(),w.hide(n.elems.info),c.detachKeyboard(),c.attachKeyboard(n.keymap),n.keymap=!1,w.hide(n.elems.overlay,200,function(){a(this).hide().css("opacity",c._options.overlayOpacity),c.trigger(Galleria.LIGHTBOX_CLOSE)})},showNext:function(){n.show(c.getNext(n.active))},showPrev:function(){n.show(c.getPrev(n.active))},show:function(b){n.active=b=typeof b=="number"?b:c.getIndex(),n.initialized||n.init(),n.keymap||(n.keymap=a.extend({},c._keyboard.map),c.attachKeyboard({escape:n.hide,right:n.showNext,left:n.showPrev})),e.unbind("resize",n.rescale);var d=c.getData(b),f=c.getDataLength(),g=c.getNext(b),h,i,j;w.hide(n.elems.info);try{for(j=c._options.preload;j>0;j--)i=new Galleria.Picture,h=c.getData(g),i.preload("big"in h?h.big:h.image),g=c.getNext(g)}catch(k){}n.image.load(d.big||d.image,function(c){n.width=c.original.width,n.height=c.original.height,a(c.image).css({width:"100.5%",height:"100.5%",top:0,zIndex:99998}),w.hide(c.image),n.elems.title.innerHTML=d.title||"",n.elems.counter.innerHTML=b+1+" / "+f,e.resize(n.rescale),n.rescale()}),a(n.elems.overlay).show(),a(n.elems.box).show()}};return this},Galleria.prototype={constructor:Galleria,init:function(b,c){c=n(c),this._original={target:b,options:c,data:null},this._target=this._dom.target=b.nodeName?b:a(b).get(0),r.push(this);if(this._target)return this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dataConfig:function(){return{}},dataSelector:"img",dataSource:this._target,debug:void 0,dummy:void 0,easing:"galleria",extend:function(){},fullscreenCrop:void 0,fullscreenDoubleTap:!0,fullscreenTransition:void 0,height:"auto",idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:void 0,initialTransition:void 0,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:void 0,minScaleRatio:void 0,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:!0,thumbCrop:!0,thumbEventType:"click",thumbFit:!0,thumbMargin:0,thumbQuality:"auto",thumbnails:!0,touchTransition:void 0,transition:"fade",transitionInitial:void 0,transitionSpeed:400,useCanvas:!1,width:"auto"},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,c&&c.debug===!1&&(f=!1),c&&typeof c.imageTimeout=="number"&&(g=c.imageTimeout),c&&typeof c.dummy=="string"&&(h=c.dummy),a(this._target).children().hide(),typeof Galleria.theme=="object"?this._init():u.push(this),this;Galleria.raise("Target not found.",!0)},_init:function(){var d=this,e=this._options;if(this._initialized)return Galleria.raise("Init failed: Gallery instance already initialized."),this;this._initialized=!0;if(!Galleria.theme)return Galleria.raise("Init failed: No theme found."),this;a.extend(!0,e,Galleria.theme.defaults,this._original.options),function(a){"getContext"in a&&(t=t||{elem:a,context:a.getContext("2d"),cache:{},length:0})}(c.createElement("canvas")),this.bind(Galleria.DATA,function(){Galleria.QUIRK&&Galleria.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML."),this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var c=this.$("container"),f={width:0,height:0},g=function(){return d.$("stage").height()};w.wait({until:function(){return a.each(["width","height"],function(a,b){f[b]=e[b]&&typeof e[b]=="number"?e[b]:Math.max(w.parseValue(c.css(b)),w.parseValue(d.$("target").css(b)),c[b](),d.$("target")[b]()),c[b](f[b])}),g()&&f.width&&f.height>10},success:function(){Galleria.WEBKIT?b.setTimeout(function(){d._run()},1):d._run()},error:function(){g()?Galleria.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+f.width+"px, height: "+f.height+"px.",!0):Galleria.raise("Could not extract a stage height from the CSS. Traced height: "+g()+"px.",!0)},timeout:1e4})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),w.hide(this.$("counter").append(this.get("current"),c.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),w.hide(d.get("tooltip")),this.$("container").addClass(Galleria.TOUCH?"touch":"notouch"),a.each(Array(2),function(b){var c=new Galleria.Picture;a(c.container).css({position:"absolute",top:0,left:0}).prepend(d._layers[b]=a(w.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),d.$("images").append(c.container),d._controls[b]=c}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").bind("click",function(a){e.clicknext&&a.stopPropagation(),e.pauseOnInteraction&&d.pause(),a=/right/.test(this.className)?"next":"prev",d[a]()}),a.each(["info","counter","image-nav"],function(a,b){e["show"+b.substr(0,1).toUpperCase()+b.substr(1).replace(/-/,"")]===!1&&w.moveOut(d.get(b.toLowerCase()))}),this.load(),!e.keepSource&&!k&&(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container");if(e.carousel){var f=0,g=e.show;this.bind(Galleria.THUMBNAIL,function(){this.updateCarousel(),++f==this.getDataLength()&&typeof g=="number"&&g>0&&this._carousel.follow(g)})}return e.swipe&&(function(a){var b=[0,0],c=[0,0],e=!1,f=0,g,h={start:"touchstart",move:"touchmove",stop:"touchend"},i=function(a){a.originalEvent.touches&&a.originalEvent.touches.length>1||(g=a.originalEvent.touches?a.originalEvent.touches[0]:a,c=[g.pageX,g.pageY],b[0]||(b=c),Math.abs(b[0]-c[0])>10&&a.preventDefault())},j=function(g){a.unbind(h.move,i),g.originalEvent.touches&&g.originalEvent.touches.length||e?e=!e:(w.timestamp()-f<1e3&&Math.abs(b[0]-c[0])>30&&Math.abs(b[1]-c[1])<100&&(g.preventDefault(),d[b[0]>c[0]?"next":"prev"]()),b=c=[0,0])};a.bind(h.start,function(d){d.originalEvent.touches&&d.originalEvent.touches.length>1||(g=d.originalEvent.touches?d.originalEvent.touches[0]:d,f=w.timestamp(),b=c=[g.pageX,g.pageY],a.bind(h.move,i).one(h.stop,j))})}(d.$("images")),e.fullscreenDoubleTap&&this.$("stage").bind("touchstart",function(){var a,b,c,e,f,g;return function(h){g=Galleria.utils.timestamp(),b=(h.originalEvent.touches?h.originalEvent.touches[0]:h).pageX,c=(h.originalEvent.touches?h.originalEvent.touches[0]:h).pageY,g-a<500&&b-e<20&&c-f<20?(d.toggleFullscreen(),h.preventDefault(),d.$("stage").unbind("touchend",arguments.callee)):(a=g,e=b,f=c)}}())),w.optimizeTouch(this.get("container")),this},_createThumbnails:function(){this.get("total").innerHTML=this.getDataLength();var d,e,f,g,h,i=this,j=this._options,k=function(){var a=i.$("thumbnails").find(".active");return a.length?a.find("img").attr("src"):!1}(),l=typeof j.thumbnails=="string"?j.thumbnails.toLowerCase():null,m=function(a){return c.defaultView&&c.defaultView.getComputedStyle?c.defaultView.getComputedStyle(f.container,null)[a]:h.css(a)},n=function(b,c,d){return function(){a(d).append(b),i.trigger({type:Galleria.THUMBNAIL,thumbTarget:b,index:c})}},o=function(b){j.pauseOnInteraction&&i.pause();var c=a(b.currentTarget).data("index");i.getIndex()!==c&&i.show(c),b.preventDefault()},p=function(b){b.scale({width:b.data.width,height:b.data.height,crop:j.thumbCrop,margin:j.thumbMargin,canvas:j.useCanvas,complete:function(b){var c=["left","top"],d,e;a.each(["Width","Height"],function(f,g){d=g.toLowerCase(),(j.thumbCrop!==!0||j.thumbCrop===d)&&j.thumbFit&&(e={},e[d]=b[d],a(b.container).css(e),e={},e[c[f]]=0,a(b.image).css(e)),b["outer"+g]=a(b.container)["outer"+g](!0)}),w.toggleQuality(b.image,j.thumbQuality===!0||j.thumbQuality==="auto"&&b.original.width<b.width*3),i.trigger({type:Galleria.THUMBNAIL,thumbTarget:b.image,index:b.data.order})}})};this._thumbnails=[],this.$("thumbnails").empty();for(d=0;this._data[d];d++)g=this._data[d],j.thumbnails===!0?(f=new Galleria.Picture(d),e=g.thumb||g.image,this.$("thumbnails").append(f.container),h=a(f.container),f.data={width:w.parseValue(m("width")),height:w.parseValue(m("height")),order:d},j.thumbFit&&j.thumbCrop!==!0?h.css({width:0,height:0}):h.css({width:f.data.width,height:f.data.height}),f.load(e,p),j.preload==="all"&&f.preload(g.image)):l==="empty"||l==="numbers"?(f={container:w.create("galleria-image"),image:w.create("img","span"),ready:!0},l==="numbers"&&a(f.image).text(d+1),this.$("thumbnails").append(f.container),b.setTimeout(n(f.image,d,f.container),50+d*20)):f={container:null,image:null},a(f.container).add(j.keepSource&&j.linkSourceImages?g.original:null).data("index",d).bind(j.thumbEventType,o),k===e&&a(f.container).addClass("active"),this._thumbnails.push(f)},_run:function(){var c=this;c._createThumbnails(),w.wait({until:function(){return Galleria.OPERA&&c.$("stage").css("display","inline-block"),c._stageWidth=c.$("stage").width(),c._stageHeight=c.$("stage").height(),c._stageWidth&&c._stageHeight>50},success:function(){q.push(c),w.show(c.get("counter")),c._options.carousel&&c._carousel.bindControls(),c._options.autoplay&&(c.pause(),typeof c._options.autoplay=="number"&&(c._playtime=c._options.autoplay),c.trigger(Galleria.PLAY),c._playing=!0),c._firstrun?typeof c._options.show=="number"&&c.show(c._options.show):(c._firstrun=!0,c._options.clicknext&&!Galleria.TOUCH&&(a.each(c._data,function(a,b){delete b.link}),c.$("stage").css({cursor:"pointer"}).bind("click",function(){c._options.pauseOnInteraction&&c.pause(),c.next()})),Galleria.History&&Galleria.History.change(function(a){isNaN(a)?b.history.go(-1):c.show(a,void 0,!0)}),a.each(Galleria.ready.callbacks,function(){this.call(c,c._options)}),c.trigger(Galleria.READY),Galleria.theme.init.call(c,c._options),c._options.extend.call(c,c._options),/^[0-9]{1,4}$/.test(j)&&Galleria.History?c.show(j,void 0,!0):c._data[c._options.show]&&c.show(c._options.show))},error:function(){Galleria.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+c._stageWidth+"px, height: "+c._stageHeight+"px.",!0)}})},load:function(b,c,d){var e=this;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),typeof c=="function"&&(d=c,c=null),b=b||this._options.dataSource,c=c||this._options.dataSelector,d=d||this._options.dataConfig,/^function Object/.test(b.constructor)&&(b=[b]),b.constructor===Array?(this.validate(b)?(this._data=b,this._parseData().trigger(Galleria.DATA)):Galleria.raise("Load failed: JSON Array not valid."),this):(a(b).find(c).each(function(b,c){var c=a(c),f={},g=c.parent(),h=g.attr("href"),g=g.attr("rel");h&&(f.image=f.big=h),g&&(f.big=g),e._data.push(a.extend({title:c.attr("title")||"",thumb:c.attr("src"),image:c.attr("src"),big:c.attr("src"),description:c.attr("alt")||"",link:c.attr("longdesc"),original:c.get(0)},f,d(c)))}),this.getDataLength()?this.trigger(Galleria.DATA):Galleria.raise("Load failed: no data found."),this)},_parseData:function(){var b=this;return a.each(this._data,function(a,c){"thumb"in c==0&&(b._data[a].thumb=c.image),!1 in c&&(b._data[a].big=c.image)}),this},splice:function(){return Array.prototype.splice.apply(this._data,w.array(arguments)),this._parseData()._createThumbnails()},push:function(){return Array.prototype.push.apply(this._data,w.array(arguments)),this._parseData()._createThumbnails()},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(a,b){return a=o(a),this.$("container")
.bind(a,this.proxy(b)),this},unbind:function(a){return a=o(a),this.$("container").unbind(a),this},trigger:function(b){return b=typeof b=="object"?a.extend(b,{scope:this}):{type:o(b),scope:this},this.$("container").trigger(b),this},addIdleState:function(a,b){return this._idle.add.apply(this._idle,w.array(arguments)),this},removeIdleState:function(a){return this._idle.remove.apply(this._idle,w.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(a){return this._fullscreen.enter.apply(this,w.array(arguments)),this},exitFullscreen:function(a){return this._fullscreen.exit.apply(this,w.array(arguments)),this},toggleFullscreen:function(a){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,w.array(arguments)),this},bindTooltip:function(a,b){return this._tooltip.bind.apply(this._tooltip,w.array(arguments)),this},defineTooltip:function(a,b){return this._tooltip.define.apply(this._tooltip,w.array(arguments)),this},refreshTooltip:function(a){return this._tooltip.show.apply(this._tooltip,w.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,w.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,w.array(arguments)),this},getActiveImage:function(){return this._getActive().image||void 0},getActiveThumb:function(){return this._thumbnails[this._active].image||void 0},getMousePosition:function(a){return{x:a.pageX-this.$("container").offset().left,y:a.pageY-this.$("container").offset().top}},addPan:function(b){if(this._options.imageCrop!==!1){var b=a(b||this.getActiveImage()),c=this,d=b.width()/2,e=b.height()/2,f=parseInt(b.css("left"),10),g=parseInt(b.css("top"),10),h=f||0,i=g||0,j=0,l=0,m=!1,n=w.timestamp(),o=0,p=0,q=function(a,c,d){a>0&&(p=Math.round(Math.max(a*-1,Math.min(0,c))),o!==p)&&((o=p,k===8)?b.parent()["scroll"+d](p*-1):(a={},a[d.toLowerCase()]=p,b.css(a)))},r=function(a){w.timestamp()-n<50||(m=!0,d=c.getMousePosition(a).x,e=c.getMousePosition(a).y)};return k===8&&(b.parent().scrollTop(i*-1).scrollLeft(h*-1),b.css({top:0,left:0})),this.$("stage").unbind("mousemove",r).bind("mousemove",r),w.addTimer("pan",function(){m&&(j=b.width()-c._stageWidth,l=b.height()-c._stageHeight,f=d/c._stageWidth*j*-1,g=e/c._stageHeight*l*-1,h+=(f-h)/c._options.imagePanSmoothness,i+=(g-i)/c._options.imagePanSmoothness,q(l,i,"Top"),q(j,h,"Left"))},50,!0),this}},proxy:function(a,b){return typeof a!="function"?function(){}:(b=b||this,function(){return a.apply(b,w.array(arguments))})},removePan:function(){return this.$("stage").unbind("mousemove"),w.clearTimer("pan"),this},addElement:function(b){var c=this._dom;return a.each(w.array(arguments),function(a,b){c[b]=w.create("galleria-"+b)}),this},attachKeyboard:function(a){return this._keyboard.attach.apply(this._keyboard,w.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,w.array(arguments)),this},appendChild:function(a,b){return this.$(a).append(this.get(b)||b),this},prependChild:function(a,b){return this.$(a).prepend(this.get(b)||b),this},remove:function(a){return this.$(w.array(arguments).join(",")).remove(),this},append:function(a){var b,c;for(b in a)if(a.hasOwnProperty(b))if(a[b].constructor===Array)for(c=0;a[b][c];c++)this.appendChild(b,a[b][c]);else this.appendChild(b,a[b]);return this},_scaleImage:function(b,c){if(b=b||this._controls.getActive()){var d,e=function(b){a(b.container).children(":first").css({top:Math.max(0,w.parseValue(b.image.style.top)),left:Math.max(0,w.parseValue(b.image.style.left)),width:w.parseValue(b.image.width),height:w.parseValue(b.image.height)})},c=a.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition},c);return this._options.layerFollow&&this._options.imageCrop!==!0?typeof c.complete=="function"?(d=c.complete,c.complete=function(){d.call(b,b),e(b)}):c.complete=e:a(b.container).children(":first").css({top:0,left:0}),b.scale(c),this}},updateCarousel:function(){return this._carousel.update(),this},rescale:function(a,b,c){var d=this;typeof a=="function"&&(c=a,a=void 0);var e=function(){d._stageWidth=a||d.$("stage").width(),d._stageHeight=b||d.$("stage").height(),d._scaleImage(),d._options.carousel&&d.updateCarousel(),d.trigger(Galleria.RESCALE),typeof c=="function"&&c.call(d)};return Galleria.WEBKIT&&!a&&!b?w.addTimer("scale",e,10):e.call(d),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},show:function(a,b,c){if(!(a===!1||!this._options.queue&&this._queue.stalled))if(a=Math.max(0,Math.min(parseInt(a,10),this.getDataLength()-1)),b=typeof b!="undefined"?!!b:a<this.getIndex(),!c&&Galleria.History)Galleria.History.set(a.toString());else return this._active=a,Array.prototype.push.call(this._queue,{index:a,rewind:b}),this._queue.stalled||this._show(),this},_show:function(){var c=this,d=this._queue[0],e=this.getData(d.index);if(e){var f=this.isFullscreen()&&"big"in e?e.big:e.image,g=this._controls.getActive(),h=this._controls.getNext(),i=h.isCached(f),j=this._thumbnails[d.index],k=function(d,e,f,g,h){return function(){c._queue.stalled=!1,w.toggleQuality(e.image,c._options.imageQuality),c._layers[c._controls.active].innerHTML="",a(f.container).css({zIndex:0,opacity:0}).show(),a(e.container).css({zIndex:1}).show(),c._controls.swap(),c._options.imagePan&&c.addPan(e.image),(d.link||c._options.lightbox)&&a(e.image).css({cursor:"pointer"}).bind("mouseup",function(){d.link?c._options.popupLinks?b.open(d.link,"_blank"):b.location.href=d.link:c.openLightbox()}),Array.prototype.shift.call(c._queue),c._queue.length&&c._show(),c._playCheck(),c.trigger({type:Galleria.IMAGE,index:g.index,imageTarget:e.image,thumbTarget:h.image})}}(e,h,g,d,j);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(d.index);if(this._options.preload){var l,m,n=this.getNext(),o;try{for(m=this._options.preload;m>0;m--)l=new Galleria.Picture,o=c.getData(n),l.preload(this.isFullscreen()&&"big"in o?o.big:o.image),n=c.getNext(n)}catch(p){}}w.show(h.container),a(c._thumbnails[d.index].container).addClass("active").siblings(".active").removeClass("active"),c.trigger({type:Galleria.LOADSTART,cached:i,index:d.index,rewind:d.rewind,imageTarget:h.image,thumbTarget:j.image}),h.load(f,function(b){var f=a(c._layers[1-c._controls.active]).html(e.layer||"").hide();c._scaleImage(b,{complete:function(b){"image"in g&&w.toggleQuality(g.image,!1),w.toggleQuality(b.image,!1),c._queue.stalled=!0,c.removePan(),c.setInfo(d.index),c.setCounter(d.index),e.layer&&(f.show(),e.link||c._options.clicknext)&&f.css("cursor","pointer").one("click",function(){e.link?a(b.image).trigger("mouseup"):c.$("stage").trigger("click")}),c.trigger({type:Galleria.LOADFINISH,cached:i,index:d.index,rewind:d.rewind,imageTarget:b.image,thumbTarget:c._thumbnails[d.index].image});var h=c._options.transition;a.each({initial:g.image===null,touch:Galleria.TOUCH,fullscreen:c.isFullscreen()},function(a,b){if(b&&c._options[a+"Transition"]!==void 0)return h=c._options[a+"Transition"],!1}),h in x==0?k():x[h].call(c,{prev:g.container,next:b.container,rewind:d.rewind,speed:c._options.transitionSpeed||400},k)}})})}},getNext:function(a){return a=typeof a=="number"?a:this.getIndex(),a===this.getDataLength()-1?0:a+1},getPrev:function(a){return a=typeof a=="number"?a:this.getIndex(),a===0?this.getDataLength()-1:a-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(a){return a in this._dom?this._dom[a]:null},getData:function(a){return a in this._data?this._data[a]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return typeof this._active=="number"?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(a){return typeof a=="undefined"?this._options:this._options[a]},setOptions:function(b,c){return typeof b=="object"?a.extend(this._options,b):this._options[b]=c,this},play:function(a){return this._playing=!0,this._playtime=a||this._playtime,this._playCheck(),this.trigger(Galleria.PLAY),this},pause:function(){return this._playing=!1,this.trigger(Galleria.PAUSE),this},playToggle:function(a){return this._playing?this.pause():this.play(a)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var a=this,b=0,c=w.timestamp(),d="play"+this._id;if(this._playing){w.clearTimer(d);var e=function(){b=w.timestamp()-c,b>=a._playtime&&a._playing?(w.clearTimer(d),a.next()):a._playing&&(a.trigger({type:Galleria.PROGRESS,percent:Math.ceil(b/a._playtime*100),seconds:Math.floor(b/1e3),milliseconds:b}),w.addTimer(d,e,20))};w.addTimer(d,e,20)}},setPlaytime:function(a){return this._playtime=a,this},setIndex:function(a){return this._active=a,this},setCounter:function(a){typeof a=="number"?a++:typeof a=="undefined"&&(a=this.getIndex()+1),this.get("current").innerHTML=a;if(k){var a=this.$("counter"),b=a.css("opacity");parseInt(b,10)===1?w.removeAlpha(a[0]):this.$("counter").css("opacity",b)}return this},setInfo:function(b){var c=this,d=this.getData(b);return a.each(["title","description"],function(a,b){var e=c.$("info-"+b);d[b]?e[d[b].length?"show":"hide"]().html(d[b]):e.empty().hide()}),this},hasInfo:function(a){var b="title description".split(" "),c;for(c=0;b[c];c++)if(this.getData(a)[b[c]])return!0;return!1},jQuery:function(b){var c=this,d=[];a.each(b.split(","),function(b,e){e=a.trim(e),c.get(e)&&d.push(e)});var e=a(c.get(d.shift()));return a.each(d,function(a,b){e=e.add(c.get(b))}),e},$:function(a){return this.jQuery.apply(this,w.array(arguments))}},a.each(m,function(a,b){var c=/_/.test(b)?b.replace(/_/g,""):b;Galleria[b.toUpperCase()]="galleria."+c}),a.extend(Galleria,{IE9:k===9,IE8:k===8,IE7:k===7,IE6:k===6,IE:k,WEBKIT:/webkit/.test(i),SAFARI:/safari/.test(i),CHROME:/chrome/.test(i),QUIRK:k&&c.compatMode&&c.compatMode==="BackCompat",MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!b.opera,IPHONE:/iphone/.test(i),IPAD:/ipad/.test(i),ANDROID:/android/.test(i),TOUCH:"ontouchstart"in c}),Galleria.addTheme=function(b){b.name||Galleria.raise("No theme name specified"),b.defaults=typeof b.defaults!="object"?{}:n(b.defaults);var c=!1,d;return typeof b.css=="string"?(a("link").each(function(a,e){d=RegExp(b.css);if(d.test(e.href))return c=!0,v(b),!1}),c||a("script").each(function(a,e){d=RegExp("galleria\\."+b.name.toLowerCase()+"\\."),d.test(e.src)&&(c=e.src.replace(/[^\/]*$/,"")+b.css,w.addTimer("css",function(){w.loadCSS(c,"galleria-theme",function(){v(b)})},1))}),c||Galleria.raise("No theme CSS loaded")):v(b),b},Galleria.loadTheme=function(c,d){var e=q.length,f=b.setTimeout(function(){Galleria.raise("Theme at "+c+" could not load, check theme path.",!0)},5e3);Galleria.theme=void 0,w.loadScript(c,function(){b.clearTimeout(f);if(e){var c=[];a.each(Galleria.get(),function(b,e){var f=a.extend(e._original.options,{data_source:e._data},d);e.$("container").remove();var g=new Galleria;g._id=e._id,g.init(e._original.target,f),c.push(g)}),q=c}})},Galleria.get=function(a){if(r[a])return r[a];if(typeof a!="number")return r;Galleria.raise("Gallery index "+a+" not found")},Galleria.addTransition=function(a,b){x[a]=b},Galleria.utils=w,Galleria.log=function(){return"console"in b&&"log"in b.console?b.console.log:function(){b.alert(w.array(arguments).join(", "))}}(),Galleria.ready=function(b){a.each(q,function(a,c){b.call(c,c._options)}),Galleria.ready.callbacks.push(b)},Galleria.ready.callbacks=[],Galleria.raise=function(b,c){var d=c?"Fatal error":"Error",e=function(b){var e='<div style="padding:4px;margin:0 0 2px;background:#'+(c?"811":"222")+'";>'+(c?"<strong>"+d+": </strong>":"")+b+"</div>";a.each(r,function(){var a=this.$("errors"),b=this.$("target");a.length||(b.css("position","relative"),a=this.addElement("errors").appendChild("target","errors").$("errors").css({color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5})),a.append(e)})};if(f){if(e(b),c)throw Error(d+": "+b)}else c&&!s&&(s=!0,c=!1,e("Image gallery could not load."))},Galleria.version=1.26,Galleria.requires=function(a,b){Galleria.version<a&&Galleria.raise(b||"You need to upgrade Galleria to version "+a+" to use one or more components.",!0)},Galleria.Picture=function(b){this.id=b||null,this.image=null,this.container=w.create("galleria-image"),a(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.tid=null},Galleria.Picture.prototype={cache:{},show:function(){w.show(this.image)},hide:function(){w.moveOut(this.image)},clear:function(){this.image=null},isCached:function(a){return!!this.cache[a]},preload:function(b){a(new Image).load(function(a,b){return function(){b[a]=a}}(b,this.cache)).attr("src",b)},load:function(c,d){this.tid=b.setTimeout(function(a){return function(){Galleria.raise("Image not loaded in "+Math.round(g/1e3)+" seconds: "+a)}}(c),g),this.image=new Image;var e=!1,f=a(this.container),i=a(this.image),j=function(c,d,e){return function(){var f=function(){a(this).unbind("load"),c.original={height:this.height,width:this.width},c.cache[e]=e,b.clearTimeout(c.tid),typeof d=="function"&&b.setTimeout(function(){d.call(c,c)},1)};!this.width||!this.height?b.setTimeout(function(a){return function(){a.width&&a.height?f.call(a):Galleria.raise("Could not extract width/height from image: "+a.src+". Traced measures: width:"+a.width+"px, height: "+a.height+"px.")}}(this),2):f.call(this)}}(this,d,c);return f.find("img").remove(),i.css("display","block").appendTo(this.container),w.hide(this.image),this.cache[c]?(a(this.image).load(j).attr("src",c),this.container):(a(this.image).load(j).error(function(){e?h?a(this).attr("src",h):Galleria.raise("Image not found: "+c):(e=!0,b.setTimeout(function(a,b){return function(){a.attr("src",b+"?"+w.timestamp())}}(a(this),c),50))}).attr("src",c),this.container)},scale:function(b){b=a.extend({width:0,height:0,min:void 0,max:void 0,margin:0,complete:function(){},position:"center",crop:!1,canvas:!1},b);if(!this.image)return this.container;var c,d,e=this,f=a(e.container),g;return w.wait({until:function(){return c=b.width||f.width()||w.parseValue(f.css("width")),d=b.height||f.height()||w.parseValue(f.css("height")),c&&d},success:function(){var f=(c-b.margin*2)/e.original.width,h=(d-b.margin*2)/e.original.height,i={"true":Math.max(f,h),width:f,height:h,"false":Math.min(f,h)}[b.crop.toString()],f="";b.max&&(i=Math.min(b.max,i)),b.min&&(i=Math.max(b.min,i)),a.each(["width","height"],function(b,c){a(e.image)[c](e[c]=e.image[c]=Math.round(e.original[c]*i))}),a(e.container).width(c).height(d),b.canvas&&t&&(t.elem.width=e.width,t.elem.height=e.height,f=e.image.src+":"+e.width+"x"+e.height,e.image.src=t.cache[f]||function(a){t.context.drawImage(e.image,0,0,e.original.width*i,e.original.height*i);try{return g=t.elem.toDataURL(),t.length+=g.length,t.cache[a]=g}catch(b){return e.image.src}}(f));var j={},k={},f=function(b,c,d){var f=0;return/\%/.test(b)?(b=parseInt(b,10)/100,c=e.image[c]||a(e.image)[c](),f=Math.ceil(c*-1*b+d*b)):f=w.parseValue(b),f},l={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};a.each(b.position.toLowerCase().split(" "),function(a,b){b==="center"&&(b="50%"),j[a?"top":"left"]=b}),a.each(j,function(b,c){l.hasOwnProperty(c)&&a.extend(k,l[c])}),j=j.top?a.extend(j,k):k,j=a.extend({top:"50%",left:"50%"},j),a(e.image).css({position:"absolute",top:f(j.top,"height",d),left:f(j.left,"width",c)}),e.show(),e.ready=!0,b.complete.call(e,e)},error:function(){Galleria.raise("Could not scale image: "+e.image.src)},timeout:1e3}),this}},a.extend(a.easing,{galleria:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},galleriaIn:function(a,b,c,d,e){return d*(b/=e)*b+c},galleriaOut:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}}),a.fn.galleria=function(b){return this.each(function(){a(this).data("galleria",(new Galleria).init(this,b))})}})(jQuery),Galleria.requires(1.25,"The Flickr Plugin requires Galleria version 1.2.5 or later."),function(a){var b=Galleria.utils.getScriptPath();Galleria.Flickr=function(a){this.api_key=a||"2a2ce06c15780ebeb0b706650fc890b2",this.options={max:30,imageSize:"medium",thumbSize:"thumb",sort:"interestingness-desc",description:!1,complete:function(){},backlink:!1}},Galleria.Flickr.prototype={constructor:Galleria.Flickr,search:function(a,b){return this._find({text:a},b)},tags:function(a,b){return this._find({tags:a},b)},user:function(a,b){return this._call({method:"flickr.urls.lookupUser",url:"flickr.com/photos/"+a},function(a){this._find({user_id:a.user.id,method:"flickr.people.getPublicPhotos"},b)})},set:function(a,b){return this._find({photoset_id:a,method:"flickr.photosets.getPhotos"},b)},gallery:function(a,b){return this._find({gallery_id:a,method:"flickr.galleries.getPhotos"},b)},groupsearch:function(a,b){return this._call({text:a,method:"flickr.groups.search"},function(a){this.group(a.groups.group[0].nsid,b)})},group:function(a,b){return this._find({group_id:a,method:"flickr.groups.pools.getPhotos"},b)},setOptions:function(b){return a.extend(this.options,b),this},_call:function(b,c){var d="http://api.flickr.com/services/rest/?",e=this;return b=a.extend({format:"json",jsoncallback:"?",api_key:this.api_key},b),a.each(b,function(a,b){d+="&"+a+"="+b}),a.getJSON(d,function(a){a.stat==="ok"?c.call(e,a):Galleria.raise(a.code.toString()+" "+a.stat+": "+a.message,!0)}),e},_getBig:function(a){return a.url_l?a.url_l:parseInt(a.width_o,10)>1280?"http://farm"+a.farm+".static.flickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_b.jpg":a.url_o||a.url_z||a.url_m},_getSize:function(a,b){var c;switch(b){case"thumb":c=a.url_t;break;case"small":c=a.url_s;break;case"big":c=this._getBig(a);break;case"original":c=a.url_o?a.url_o:this._getBig(a);break;default:c=a.url_z||a.url_m}return c},_find:function(b,c){return b=a.extend({method:"flickr.photos.search",extras:"url_t,url_m,url_o,url_s,url_l,url_z,description",sort:this.options.sort},b),this._call(b,function(a){var b=[],d=a.photos?a.photos.photo:a.photoset.photo,e=Math.min(this.options.max,d.length),f,g;for(g=0;g<e;g++)f=d[g],b.push({thumb:this._getSize(f,this.options.thumbSize),image:this._getSize(f,this.options.imageSize),big:this._getBig(f),title:d[g].title,description:this.options.description&&d[g].description?d[g].description._content:"",link:this.options.backlink?"http://flickr.com/photos/"+f.owner+"/"+f.id:""});c.call(this,b)})}};var c=Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||typeof this._options.flickr!="string"){c.apply(this,Galleria.utils.array(arguments));return}var b=this,d=Galleria.utils.array(arguments),e=this._options.flickr.split(":"),f,g=a.extend({},b._options.flickrOptions),h=typeof g.loader!="undefined"?g.loader:a('<div class="loader">').css({width:48,height:48,opacity:.7,background:"#000 url(images/loader.gif) no-repeat 50% 50%"});if(e.length){if(typeof Galleria.Flickr.prototype[e[0]]!="function")return Galleria.raise(e[0]+" method not found in Flickr plugin"),c.apply(this,d);if(!e[1])return Galleria.raise("No flickr argument found"),c.apply(this,d);window.setTimeout(function(){b.$("target").append(h)},100),f=new Galleria.Flickr,typeof b._options.flickrOptions=="object"&&f.setOptions(b._options.flickrOptions),f[e[0]](e[1],function(a){b._data=a,h.remove(),b.trigger(Galleria.DATA),f.options.complete.call(f,a)})}else c.apply(this,d)}}(jQuery),function(a,b){a.fn.imagesLoaded=function(a){function f(){a.call(b,c)}function g(a){--d<=0&&a.target.src!==e&&(setTimeout(f),c.unbind("load error",g))}var b=this,c=b.find("img").add(b.filter("img")),d=c.length,e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";return d||f(),c.bind("load error",g).each(function(){if(this.complete||typeof this.complete=="undefined"){var a=this.src;this.src=e,this.src=a}}),b}}(jQuery),function(a,b,c){var d=b.event,e;d.special.smartresize={setup:function(){b(this).bind("resize",d.special.smartresize.handler)},teardown:function(){b(this).unbind("resize",d.special.smartresize.handler)},handler:function(a,b){var c=this,d=arguments;a.type="smartresize",e&&clearTimeout(e),e=setTimeout(function(){jQuery.event.handle.apply(c,d)},b==="execAsap"?0:100)}},b.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])},b.Mason=function(a,c){this.element=b(c),this._create(a),this._init()};var f=["position","height"];b.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1},b.Mason.prototype={_filterFindBricks:function(a){var b=this.options.itemSelector;return b?a.filter(b).add(a.find(b)):a},_getBricks:function(a){var b=this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick");return b},_create:function(c){this.options=b.extend(!0,{},b.Mason.settings,c),this.styleQueue=[],this.reloadItems();var d=this.element[0].style;this.originalStyle={};for(var e=0,g=f.length;e<g;e++){var h=f[e];this.originalStyle[h]=d[h]||""}this.element.css({position:"relative"}),this.horizontalDirection=this.options.isRTL?"right":"left",this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)},this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth=="function";var i=this;setTimeout(function(){i.element.addClass("masonry")},0),this.options.isResizable&&b(a).bind("smartresize.masonry",function(){i.resize()})},_init:function(a){this._getColumns(),this._reLayout(a)},option:function(a,c){b.isPlainObject(a)&&(this.options=b.extend(!0,this.options,a))},layout:function(a,b){for(var c=0,d=a.length;c<d;c++)this._placeBrick(a[c]);var e={};e.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var f=0,c=this.cols;while(--c){if(this.colYs[c]!==0)break;f++}e.width=(this.cols-f)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:e});var g=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",h=this.options.animationOptions,i;for(c=0,d=this.styleQueue.length;c<d;c++)i=this.styleQueue[c],i.$el[g](i.style,h);this.styleQueue=[],b&&b.call(a),this.isLaidOut=!0},_getColumns:function(){var a=this.options.isFitWidth?this.element.parent():this.element,b=a.width();this.columnWidth=this.isFluid?this.options.columnWidth(b):this.options.columnWidth||this.$bricks.outerWidth(!0)||b,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((b+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(a){var c=b(a),d,e,f,g,h;d=Math.ceil(c.outerWidth(!0)/(this.columnWidth+this.options.gutterWidth)),d=Math.min(d,this.cols);if(d===1)f=this.colYs;else{e=this.cols+1-d,f=[];for(h=0;h<e;h++)g=this.colYs.slice(h,h+d),f[h]=Math.max.apply(Math,g)}var i=Math.min.apply(Math,f),j=0;for(var k=0,l=f.length;k<l;k++)if(f[k]===i){j=k;break}var m={top:i+this.offset.y};m[this.horizontalDirection]=this.columnWidth*j+this.offset.x,this.styleQueue.push({$el:c,style:m});var n=i+c.outerHeight(!0),o=this.cols+1-l;for(k=0;k<o;k++)this.colYs[j+k]=n},resize:function(){var a=this.cols;this._getColumns(),(this.isFluid||this.cols!==a)&&this._reLayout()},_reLayout:function(a){var b=this.cols;this.colYs=[];while(b--)this.colYs.push(0);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems(),this._init(a)},appended:function(a,b,c){if(b){this._filterFindBricks(a).css({top:this.element.height()});var d=this;setTimeout(function(){d._appended(a,c)},1)}else this._appended(a,c)},_appended:function(a,b){var c=this._getBricks(a);this.$bricks=this.$bricks.add(c),this.layout(c,b)},remove:function(a){this.$bricks=this.$bricks.not(a),a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var c=this.element[0].style;for(var d=0,e=f.length;d<e;d++){var g=f[d];c[g]=this.originalStyle[g]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),b(a).unbind(".masonry")}},b.fn.imagesLoaded=function(a){function b(){--g<=0&&this.src!==h&&(setTimeout(d),f.unbind("load error",b))}function d(){a.call(e,f)}var e=this,f=e.find("img").add(e.filter("img")),g=f.length,h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";return g||d(),f.bind("load error",b).each(function(){if(this.complete||this.complete===c){var a=this.src;this.src=h,this.src=a}}),e};var g=function(a){this.console&&console.error(a)};b.fn.masonry=function(a){if(typeof a=="string"){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var d=b.data(this,"masonry");if(!d)g("cannot call methods on masonry prior to initialization; attempted to call method '"+a+"'");else{if(!b.isFunction(d[a])||a.charAt(0)==="_"){g("no such method '"+a+"' for masonry instance");return}d[a].apply(d,c)}})}else this.each(function(){var c=b.data(this,"masonry");c?(c.option(a||{}),c._init()):b.data(this,"masonry",new b.Mason(a,this))});return this}}(window,jQuery),eval(function(a,b,c,d,e,f){e=function(a){return(a<b?"":e(parseInt(a/b)))+((a%=b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(c--)f[e(c)]=d[c]||e(c);d=[function(a){return f[a]}],e=function(){return"\\w+"},c=1}while(c--)d[c]&&(a=a.replace(new RegExp("\\b"+e(c)+"\\b","g"),d[c]));return a}(";(4($,g,h,i){l j='1L',1M={2g:'1L',K:{J:O,y:O,q:O,D:O,o:O,G:O,H:O},12:'',S:'',3:h.2h.13,w:h.S,1u:'1L.2i',A:{},18:0,1m:x,2j:x,2k:x,1N:O,1O:4(){},2l:4(){},1v:4(){},1P:4(){},8:{J:{3:'',19:'2m',T:'2n-33'},y:{3:'',P:'1w',1a:'34',E:'',1n:'O',1Q:'O',1R:'',1o:'',T:'35'},q:{3:'',A:'36',1S:'',W:'',1x:'',T:'2n'},D:{3:'',Q:'37'},o:{3:'',19:'2m'},G:{3:'',1a:'1'},H:{3:'',1T:''}}},1y={J:\"\",y:\"F://38.y.r/?2o={3}&1p=?\",q:\"F://39.3a.q.r/1/3b/A.2p?3={3}&1p=?\",D:\"F://3c.D.r/2.0/3d.3e?3f={3}&Q=1b&1p=?\",o:'F://3g.o.r/3h/2p/3i/m?3={3}&1p=?',G:\"\",H:\"F://1c.H.r/3j/A/K?3k=3l&3={3}&1p=?\"},2q={J:4(b){l c=b.6.8.J;$(b.p).U('.8').X('<n I=\"Y 3m\"><n I=\"g-1z\" m-19=\"'+c.19+'\" m-13=\"'+(c.3!==''?c.3:b.6.3)+'\"></n></n>');g.3n={T:b.6.8.J.T};l d=0;9(B 2r==='C'&&d==0){d=1;(4(){l a=h.1d('L');a.Q='w/1b';a.1q=x;a.14='1r://3o.2s.r/Z/1z.Z';l s=h.1e('L')[0];s.1f.1g(a,s)})()}N{2r.1z.3p()}},y:4(c){l e=c.6.8.y;$(c.p).U('.8').X('<n I=\"Y y\"><n I=\"1U-1w\" m-13=\"'+(e.3!==''?e.3:c.6.3)+'\" m-1n=\"'+e.1n+'\" m-1a=\"'+e.1a+'\" m-E=\"'+e.E+'\" m-3q-1Q=\"'+e.1Q+'\" m-P=\"'+e.P+'\" m-1R=\"'+e.1R+'\" m-1o=\"'+e.1o+'\" m-W=\"'+e.W+'\"></n></n>');l f=0;9(B 1h==='C'&&f==0){f=1;(4(d,s,a){l b,1V=d.1e(s)[0];9(d.3r(a)){1A}b=d.1d(s);b.2o=a;b.14='//3s.y.3t/'+e.T+'/3u.Z#3v=1';1V.1f.1g(b,1V)}(h,'L','y-3w'))}N{1h.3x.3y()}},q:4(b){l c=b.6.8.q;$(b.p).U('.8').X('<n I=\"Y q\"><a 13=\"1r://q.r/K\" I=\"q-K-Y\" m-3=\"'+(c.3!==''?c.3:b.6.3)+'\" m-A=\"'+c.A+'\" m-w=\"'+b.6.w+'\" m-W=\"'+c.W+'\" m-1S=\"'+c.1S+'\" m-1x=\"'+c.1x+'\" m-T=\"'+c.T+'\">3z</a></n>');l d=0;9(B 1W==='C'&&d==0){d=1;(4(){l a=h.1d('L');a.Q='w/1b';a.1q=x;a.14='F://1B.q.r/1C.Z';l s=h.1e('L')[0];s.1f.1g(a,s)})()}N{$.3A({3:'F://1B.q.r/1C.Z',3B:'L',3C:x})}},D:4(a){l b=a.6.8.D;$(a.p).U('.8').X('<n I=\"Y D\"><a I=\"3D '+b.Q+'\" 3E=\"3F 3G\" 13=\"F://D.r/2t?3='+R((b.3!==''?b.3:a.6.3))+'\"></a></n>');l c=0;9(B 3H==='C'&&c==0){c=1;(4(){l s=h.1d('2u'),1X=h.1e('2u')[0];s.Q='w/1b';s.1q=x;s.14='F://1C.D.r/8.Z';1X.1f.1g(s,1X)})()}},o:4(a){9(a.6.8.o.19=='3I'){l b='E:1Y;',1Z='z:2v;E:1Y;1o-19:3J;1s-z:2v;',20='z:2w;1s-z:2w;21-3K:1D;'}N{l b='E:3L;',1Z='22:3M;23:0 1D;z:1t;E:3N;1s-z:1t;',20='22:3O;z:1t;1s-z:1t;'}l c=a.1m(a.6.A.o);9(B c===\"C\"){c=0}$(a.p).U('.8').X('<n I=\"Y o\"><n 1E=\"'+b+'1o:3P 3Q,3R,3S-3T;3U:3V;1F:#3W;2x:3X-2y;22:2z;z:1t;1s-z:3Y;21:0;23:0;w-3Z:0;40-24:41;\">'+'<n 1E=\"'+1Z+'2A-1F:#2B;21-42:43;44:45;w-24:2C;1G:2D 2E #46;1G-2F:1D;\">'+c+'</n>'+'<n 1E=\"'+20+'2x:2y;23:0;w-24:2C;w-47:2z;E:1Y;2A-1F:#48;1G:2D 2E #49;1G-2F:1D;1F:#2B;\">'+'<2G 14=\"F://1c.o.r/4a/2G/o.4b.4c\" z=\"10\" E=\"10\" 4d=\"4e\" /> 4f</n></n></n>');$(a.p).U('.o').4g('1v',4(){a.2H('o')})},G:4(b){l c=b.6.8.G;$(b.p).U('.8').X('<n I=\"Y G\"><2I:25 1a=\"'+c.1a+'\" 2h=\"'+(c.3!==''?c.3:b.6.3)+'\"></2I:25></n>');l d=0;9(B 1H==='C'&&d==0){d=1;(4(){l a=h.1d('L');a.Q='w/1b';a.1q=x;a.14='F://1B.G.r/1/1C.Z';l s=h.1e('L')[0];s.1f.1g(a,s)})();s=g.4h(4(){9(B 1H!=='C'){1H.2J();26(s)}},4i)}N{1H.2J()}},H:4(b){l c=b.6.8.H;$(b.p).U('.8').X('<n I=\"Y H\"><L Q=\"2K/K\" m-3=\"'+(c.3!==''?c.3:b.6.3)+'\" m-1T=\"'+c.1T+'\"></L></n>');l d=0;9(B g.2L==='C'&&d==0){d=1;(4(){l a=h.1d('L');a.Q='w/1b';a.1q=x;a.14='F://1B.H.r/2K.Z';l s=h.1e('L')[0];s.1f.1g(a,s)})()}N{g.2L.27()}}},2M={J:4(){},y:4(){1U=g.2N(4(){9(B 1h!=='C'){1h.28.29('2O.4j',4(a){1i.1j(['1k','y','1w',a])});1h.28.29('2O.4k',4(a){1i.1j(['1k','y','4l',a])});1h.28.29('4m.1n',4(a){1i.1j(['1k','y','1n',a])});26(1U)}},2P)},q:4(){2Q=g.2N(4(){9(B 1W!=='C'){1W.4n.4o('1I',4(a){9(a){1i.1j(['1k','q','1I'])}});26(2Q)}},2P)},D:4(){},o:4(){},G:4(){},H:4(){4 4p(){1i.1j(['1k','H','K'])}}},2R={J:4(a){g.15(\"1r://1z.2s.r/4q/+1/4r?4s=\"+a.8.J.T+\"&3=\"+R((a.8.J.3!==''?a.8.J.3:a.3)),\"\",\"16=0, 1J=0, E=2S, z=2T\")},y:4(a){g.15(\"F://1c.y.r/4t.2i?u=\"+R((a.8.y.3!==''?a.8.y.3:a.3))+\"&t=\"+a.w+\"\",\"\",\"16=0, 1J=0, E=2S, z=2T\")},q:4(a){g.15(\"1r://q.r/4u/1I?w=\"+R(a.w)+\"&3=\"+R((a.8.q.3!==''?a.8.q.3:a.3))+(a.8.q.W!==''?'&W='+a.8.q.W:''),\"\",\"16=0, 1J=0, E=2U, z=2V\")},D:4(a){g.15(\"F://D.r/4v/4w/2t?3=\"+R((a.8.D.3!==''?a.8.D.3:a.3))+\"&S=\"+a.w+\"&1x=x&1E=x\",\"\",\"16=0, 1J=0, E=2U, z=2V\")},o:4(a){g.15('F://1c.o.r/4x?v=5&4y&4z=4A&3='+R((a.8.o.3!==''?a.8.o.3:a.3))+'&S='+a.w,'o','16=2a,E=1l,z=1l')},G:4(a){g.15('F://1c.G.r/25/?3='+R((a.8.o.3!==''?a.8.o.3:a.3)),'G','16=2a,E=1l,z=1l')},H:4(a){g.15('1r://1c.H.r/4B/K?3='+R((a.8.o.3!==''?a.8.o.3:a.3))+'&4C=&4D=x','H','16=2a,E=1l,z=1l')}};4 V(a,b){7.p=a;7.6=$.4E(x,{},1M,b);7.6.K=b.K;7.4F=1M;7.4G=j;7.27()};V.17.27=4(){l c=7;9(7.6.1u!==''){1y.J=7.6.1u+'?3={3}&Q=J';1y.G=7.6.1u+'?3={3}&Q=G'}$(7.p).4H(7.6.2g);9(B $(7.p).m('S')!=='C'){7.6.S=$(7.p).m('S')}9(B $(7.p).m('3')!=='C'){7.6.3=$(7.p).m('3')}9(B $(7.p).m('w')!=='C'){7.6.w=$(7.p).m('w')}9(c.6.2k===x){$.2b(7.6.K,4(a,b){9(b===x){4I{c.2W(a)}4J(e){}}})}N{7.2c();7.6.1P(7,7.6)}$(7.p).1O(4(){9($(7).U('.8').4K===0&&c.6.2j===x){c.2c()}c.6.1O(c,c.6)},4(){c.6.2l(c,c.6)});$(7.p).1v(4(){c.6.1v(c,c.6);1A O})};V.17.2c=4(){l c=7;$(7.p).X('<n I=\"8\"></n>');$.2b(c.6.K,4(a,b){9(b==x){2q[a](c);9(c.6.1N===x){2M[a]()}}})};V.17.2W=4(b){l c=7,A=0,3=1y[b].2d('{3}',R(7.6.3));9(3!=''){$.4L(3,4(a){9(B a.A!==\"C\"){A+=2e(a.A,10)}N 9(B a.2X!==\"C\"){A+=2e(a.2X,10)}N 9(B a[0]!==\"C\"){A+=2e(a[0].4M,10)}N 9(B a[0]!==\"C\"){}c.6.A[b]=A;c.6.18+=A;c.2Y();c.6.1P(c,c.6)})}};V.17.2Y=4(){l a=7.6.18,12=7.6.12;9(7.6.1m===x){a=7.1m(a)}9(12!==''){12=12.2d('{18}',a);$(7.p).1K(12)}N{$(7.p).1K('<n I=\"4N\"><a I=\"A\" 13=\"#\">'+a+'</a>'+(7.6.S!==''?'<a I=\"K\" 13=\"#\">'+7.6.S+'</a>':'')+'</n>')}};V.17.1m=4(a){9(a>=2Z){a=(a/2Z).30(2)+\"M\"}N 9(a>=31){a=(a/31).30(1)+\"k\"}1A a};V.17.2H=4(a){2R[a](7.6);9(7.6.1N===x){l b={J:{11:'4O',P:'+1'},y:{11:'y',P:'1w'},q:{11:'q',P:'1I'},D:{11:'D',P:'2f'},o:{11:'o',P:'2f'},G:{11:'G',P:'2f'},H:{11:'H',P:'K'}};1i.1j(['1k',b[a].11,b[a].P])}};V.17.4P=4(){l a=$(7.p).1K();$(7.p).1K(a.2d(7.6.18,7.6.18+1))};$.4Q[j]=4(a){1A 7.2b(4(){9(!$.m(7,'32'+j)){$.m(7,'32'+j,4R V(7,a))}})}})(4S,4T,4U);",62,305,"|||url|function||options|this|buttons|if||||||||||||var|data|div|delicious|element|twitter|com|||||text|true|facebook|height|count|typeof|undefined|digg|width|http|stumbleupon|linkedin|class|googlePlus|share|script||else|false|action|type|encodeURIComponent|title|lang|find|Plugin|via|append|button|js||site|template|href|src|open|toolbar|prototype|total|size|layout|javascript|www|createElement|getElementsByTagName|parentNode|insertBefore|FB|_gaq|push|_trackSocial|550|shorterTotal|send|font|callback|async|https|line|20px|urlCurl|click|like|related|urlJson|plusone|return|platform|widgets|3px|style|color|border|STMBLPN|tweet|status|html|sharrre|defaults|enableTracking|hover|render|faces|colorscheme|hashtags|counter|fb|fjs|twttr|s1|50px|cssCount|cssShare|margin|float|padding|align|badge|clearInterval|init|Event|subscribe|no|each|loadButtons|replace|parseInt|add|className|location|php|enableHover|enableCounter|hide|medium|en|id|json|loadButton|gapi|google|submit|SCRIPT|35px|18px|display|block|none|background|fff|center|1px|solid|radius|img|openPopup|su|processWidgets|in|IN|tracking|setInterval|edge|1000|tw|popup|900|500|650|360|getSocialJson|shares|renderer|1e6|toFixed|1e3|plugin_|US|button_count|en_US|horizontal|DiggCompact|graph|cdn|api|urls|services|story|getInfo|links|feeds|v2|urlinfo|countserv|format|jsonp|googleplus|___gcfg|apis|go|show|getElementById|connect|net|all|xfbml|jssdk|XFBML|parse|Tweet|ajax|dataType|cache|DiggThisButton|rel|nofollow|external|__DBW|tall|15px|top|93px|right|26px|left|12px|Arial|Helvetica|sans|serif|cursor|pointer|666666|inline|normal|indent|vertical|baseline|bottom|5px|overflow|hidden|ccc|decoration|7EACEE|40679C|static|small|gif|alt|Delicious|Add|on|setTimeout|100|create|remove|unlike|message|events|bind|LinkedInShare|_|confirm|hl|sharer|intent|tools|diggthis|save|noui|jump|close|cws|token|isFramed|extend|_defaults|_name|addClass|try|catch|length|getJSON|total_posts|box|Google|simulateClick|fn|new|jQuery|window|document"
.split("|"),0,{})),function(a,b){var c,d="([^/]+)",e=/:([\w\d]+)/g,f=/\?([^#]*)$/,g=function(a){return Array.prototype.slice.call(a)},h=function(a){return Object.prototype.toString.call(a)==="[object Function]"},i=function(a){return Object.prototype.toString.call(a)==="[object Array]"},j=function(a){return decodeURIComponent((a||"").replace(/\+/g," "))},k=encodeURIComponent,l=function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},m=function(a){return function(b,c){return this.route.apply(this,[a,b,c])}},n={},o=!!b.history&&!!history.pushState,p=[];c=function(){var b=g(arguments),d,e;c.apps=c.apps||{};if(b.length===0||b[0]&&h(b[0]))return c.apply(c,["body"].concat(b));if(typeof (e=b.shift())=="string")return d=c.apps[e]||new c.Application,d.element_selector=e,b.length>0&&a.each(b,function(a,b){d.use(b)}),d.element_selector!=e&&delete c.apps[e],c.apps[d.element_selector]=d,d},c.VERSION="0.7.0",c.addLogger=function(a){p.push(a)},c.log=function(){var b=g(arguments);b.unshift("["+Date()+"]"),a.each(p,function(a,d){d.apply(c,b)})},typeof b.console!="undefined"?h(b.console.log.apply)?c.addLogger(function(){b.console.log.apply(b.console,arguments)}):c.addLogger(function(){b.console.log(arguments)}):typeof console!="undefined"&&c.addLogger(function(){console.log.apply(console,arguments)}),a.extend(c,{makeArray:g,isFunction:h,isArray:i}),c.Object=function(b){return a.extend(this,b||{})},a.extend(c.Object.prototype,{escapeHTML:l,h:l,toHash:function(){var b={};return a.each(this,function(a,c){h(c)||(b[a]=c)}),b},toHTML:function(){var b="";return a.each(this,function(a,c){h(c)||(b+="<strong>"+a+"</strong> "+c+"<br />")}),b},keys:function(a){var b=[];for(var c in this)(!h(this[c])||!a)&&b.push(c);return b},has:function(b){return this[b]&&a.trim(this[b].toString())!==""},join:function(){var a=g(arguments),b=a.shift();return a.join(b)},log:function(){c.log.apply(c,arguments)},toString:function(b){var c=[];return a.each(this,function(a,d){(!h(d)||b)&&c.push('"'+a+'": '+d.toString())}),"Sammy.Object: {"+c.join(",")+"}"}}),c.DefaultLocationProxy=function(a,b){this.app=a,this.is_native=!1,this.has_history=o,this._startPolling(b)},c.DefaultLocationProxy.fullPath=function(a){var b=a.toString().match(/^[^#]*(#.+)$/),c=b?b[1]:"";return[a.pathname,a.search,c].join("")},c.DefaultLocationProxy.prototype={bind:function(){var d=this,e=this.app,f=c.DefaultLocationProxy;a(b).bind("hashchange."+this.app.eventNamespace(),function(a,c){d.is_native===!1&&!c&&(d.is_native=!0,b.clearInterval(f._interval)),e.trigger("location-changed")}),o&&!e.disable_push_state&&(a(b).bind("popstate."+this.app.eventNamespace(),function(a){e.trigger("location-changed")}),a("a").live("click.history-"+this.app.eventNamespace(),function(a){var c=f.fullPath(this);if(this.hostname==b.location.hostname&&e.lookupRoute("get",c))return a.preventDefault(),d.setLocation(c),!1})),f._bindings||(f._bindings=0),f._bindings++},unbind:function(){a(b).unbind("hashchange."+this.app.eventNamespace()),a(b).unbind("popstate."+this.app.eventNamespace()),a("a").die("click.history-"+this.app.eventNamespace()),c.DefaultLocationProxy._bindings--,c.DefaultLocationProxy._bindings<=0&&b.clearInterval(c.DefaultLocationProxy._interval)},getLocation:function(){return c.DefaultLocationProxy.fullPath(b.location)},setLocation:function(a){/^([^#\/]|$)/.test(a)&&(o?a="/"+a:a="#!/"+a);if(a!=this.getLocation())if(o&&/^\//.test(a))history.pushState({path:a},b.title,a),this.app.trigger("location-changed");else return b.location=a},_startPolling:function(d){var e=this;if(!c.DefaultLocationProxy._interval){d||(d=10);var f=function(){var d=e.getLocation();(typeof c.DefaultLocationProxy._last_location=="undefined"||d!=c.DefaultLocationProxy._last_location)&&b.setTimeout(function(){a(b).trigger("hashchange",[!0])},0),c.DefaultLocationProxy._last_location=d};f(),c.DefaultLocationProxy._interval=b.setInterval(f,d)}}},c.Application=function(a){var b=this;this.routes={},this.listeners=new c.Object({}),this.arounds=[],this.befores=[],this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1e3,10),this.context_prototype=function(){c.EventContext.apply(this,arguments)},this.context_prototype.prototype=new c.EventContext,h(a)&&a.apply(this,[this]),this._location_proxy||this.setLocationProxy(new c.DefaultLocationProxy(this,this.run_interval_every)),this.debug&&this.bindToAllEvents(function(a,c){b.log(b.toString(),a.cleaned_type,c||{})})},c.Application.prototype=a.extend({},c.Object.prototype,{ROUTE_VERBS:["get","post","put","delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:!1,element_selector:"body",debug:!1,raise_errors:!1,run_interval_every:50,disable_push_state:!1,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(b){return b?a(this.element_selector).find(b):a(this.element_selector)},use:function(){var a=g(arguments),b=a.shift(),d=b||"";try{a.unshift(this),typeof b=="string"&&(d="Sammy."+b,b=c[b]),b.apply(this,a)}catch(e){typeof b=="undefined"?this.error("Plugin Error: called use() but plugin ("+d.toString()+") is not defined",e):h(b)?this.error("Plugin Error",e):this.error("Plugin Error: called use() but '"+d.toString()+"' is not a function",e)}return this},setLocationProxy:function(a){var b=this._location_proxy;this._location_proxy=a,this.isRunning()&&(b&&b.unbind(),this._location_proxy.bind())},route:function(b,c,f){var g=this,i=[],j,k;!f&&h(c)&&(c=b,f=c,b="any"),b=b.toLowerCase();if(c.constructor==String){e.lastIndex=0;while((k=e.exec(c))!==null)i.push(k[1]);c=new RegExp(c.replace(e,d)+"$")}return typeof f=="string"&&(f=g[f]),j=function(a){var b={verb:a,path:c,callback:f,param_names:i};g.routes[a]=g.routes[a]||[],g.routes[a].push(b)},b==="any"?a.each(this.ROUTE_VERBS,function(a,b){j(b)}):j(b),this},get:m("get"),post:m("post"),put:m("put"),del:m("delete"),any:m("any"),mapRoutes:function(b){var c=this;return a.each(b,function(a,b){c.route.apply(c,b)}),this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(a,b,c){var d=this;typeof c=="undefined"&&(c=b);var e=function(){var a,b,e;a=arguments[0],e=arguments[1],e&&e.context?(b=e.context,delete e.context):b=new d.context_prototype(d,"bind",a.type,e,a.target),a.cleaned_type=a.type.replace(d.eventNamespace(),""),c.apply(b,[a,e])};return this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(e),this.isRunning()&&this._listen(a,e),this},trigger:function(a,b){return this.$element().trigger([a,this.eventNamespace()].join("."),[b]),this},refresh:function(){return this.last_location=null,this.trigger("location-changed"),this},before:function(a,b){return h(a)&&(b=a,a={}),this.befores.push([a,b]),this},after:function(a){return this.bind("event-context-after",a)},around:function(a){return this.arounds.push(a),this},isRunning:function(){return this._running},helpers:function(b){return a.extend(this.context_prototype.prototype,b),this},helper:function(a,b){return this.context_prototype.prototype[a]=b,this},run:function(c){if(this.isRunning())return!1;var d=this;return a.each(this.listeners.toHash(),function(b,c){a.each(c,function(a,c){d._listen(b,c)})}),this.trigger("run",{start_url:c}),this._running=!0,this.last_location=null,!/\#(.+)/.test(this.getLocation())&&typeof c!="undefined"&&this.setLocation(c),this._checkLocation(),this._location_proxy.bind(),this.bind("location-changed",function(){d._checkLocation()}),this.bind("submit",function(b){var c=d._checkFormSubmission(a(b.target).closest("form"));return c===!1?b.preventDefault():!1}),a(b).bind("beforeunload",function(){d.unload()}),this.trigger("changed")},unload:function(){if(!this.isRunning())return!1;var b=this;return this.trigger("unload"),this._location_proxy.unbind(),this.$element().unbind("submit").removeClass(b.eventNamespace()),a.each(this.listeners.toHash(),function(c,d){a.each(d,function(a,d){b._unlisten(c,d)})}),this._running=!1,this},bindToAllEvents:function(b){var c=this;return a.each(this.APP_EVENTS,function(a,d){c.bind(d,b)}),a.each(this.listeners.keys(!0),function(d,e){a.inArray(e,c.APP_EVENTS)==-1&&c.bind(e,b)}),this},routablePath:function(a){return a.replace(f,"")},lookupRoute:function(a,b){var c=this,d=!1,e=0,f,g;if(typeof this.routes[a]!="undefined"){f=this.routes[a].length;for(;e<f;e++){g=this.routes[a][e];if(c.routablePath(b).match(g.path)){d=g;break}}}return d},runRoute:function(b,c,d,e){var f=this,g=this.lookupRoute(b,c),h,i,k,l,m,n,o,p,q;this.log("runRoute",[b,c].join(" ")),this.trigger("run-route",{verb:b,path:c,params:d}),typeof d=="undefined"&&(d={}),a.extend(d,this._parseQueryString(c));if(g){this.trigger("route-found",{route:g}),(p=g.path.exec(this.routablePath(c)))!==null&&(p.shift(),a.each(p,function(a,b){g.param_names[a]?d[g.param_names[a]]=j(b):(d.splat||(d.splat=[]),d.splat.push(j(b)))})),h=new this.context_prototype(this,b,c,d,e),k=this.arounds.slice(0),m=this.befores.slice(0),o=[h].concat(d.splat),i=function(){var a;while(m.length>0){n=m.shift();if(f.contextMatchesOptions(h,n[0])){a=n[1].apply(h,[h]);if(a===!1)return!1}}return f.last_route=g,h.trigger("event-context-before",{context:h}),a=g.callback.apply(h,o),h.trigger("event-context-after",{context:h}),a},a.each(k.reverse(),function(a,b){var c=i;i=function(){return b.apply(h,[c])}});try{q=i()}catch(r){this.error(["500 Error",b,c].join(" "),r)}return q}return this.notFound(b,c)},contextMatchesOptions:function(a,b,c){var d=b;if(typeof d=="undefined"||d=={})return!0;typeof c=="undefined"&&(c=!0);if(typeof d=="string"||h(d.test))d={path:d};if(d.only)return this.contextMatchesOptions(a,d.only,!0);if(d.except)return this.contextMatchesOptions(a,d.except,!1);var e=!0,f=!0;return d.path&&(h(d.path.test)||(d.path=new RegExp(d.path.toString()+"$")),e=d.path.test(a.path)),d.verb&&(typeof d.verb=="string"?f=d.verb===a.verb:f=d.verb.indexOf(a.verb)>-1),c?f&&e:!f||!e},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(a){return this._location_proxy.setLocation(a)},swap:function(a){return this.$element().html(a)},templateCache:function(a,b){return typeof b!="undefined"?n[a]=b:n[a]},clearTemplateCache:function(){return n={}},notFound:function(a,b){var c=this.error(["404 Not Found",a,b].join(" "));return a==="get"?c:!0},error:function(a,b){b||(b=new Error),b.message=[a,b.message].join(" "),this.trigger("error",{message:b.message,error:b});if(this.raise_errors)throw b;this.log(b.message,b)},_checkLocation:function(){var a,b;a=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=a)this.last_location=["get",a],b=this.runRoute("get",a);return b},_getFormVerb:function(b){var c=a(b),d,e;e=c.find('input[name="_method"]'),e.length>0&&(d=e.val()),d||(d=c[0].getAttribute("method"));if(!d||d=="")d="get";return a.trim(d.toString().toLowerCase())},_checkFormSubmission:function(b){var c,d,e,f,g;return this.trigger("check-form-submission",{form:b}),c=a(b),d=c.attr("action")||"",e=this._getFormVerb(c),this.log("_checkFormSubmission",c,d,e),e==="get"?(this.setLocation(d+"?"+this._serializeFormParams(c)),g=!1):(f=a.extend({},this._parseFormParams(c)),g=this.runRoute(e,d,f,b.get(0))),typeof g=="undefined"?!1:g},_serializeFormParams:function(a){var b="",c=a.serializeArray(),d;if(c.length>0){b=this._encodeFormPair(c[0].name,c[0].value);for(d=1;d<c.length;d++)b=b+"&"+this._encodeFormPair(c[d].name,c[d].value)}return b},_encodeFormPair:function(a,b){return k(a)+"="+k(b)},_parseFormParams:function(a){var b={},c=a.serializeArray(),d;for(d=0;d<c.length;d++)b=this._parseParamPair(b,c[d].name,c[d].value);return b},_parseQueryString:function(a){var b={},c,d,e,g;c=a.match(f);if(c){d=c[1].split("&");for(g=0;g<d.length;g++)e=d[g].split("="),b=this._parseParamPair(b,j(e[0]),j(e[1]||""))}return b},_parseParamPair:function(a,b,c){return a[b]?i(a[b])?a[b].push(c):a[b]=[a[b],c]:a[b]=c,a},_listen:function(a,b){return this.$element().bind([a,this.eventNamespace()].join("."),b)},_unlisten:function(a,b){return this.$element().unbind([a,this.eventNamespace()].join("."),b)}}),c.RenderContext=function(a){this.event_context=a,this.callbacks=[],this.previous_content=null,this.content=null,this.next_engine=!1,this.waiting=!1},c.RenderContext.prototype=a.extend({},c.Object.prototype,{then:function(a){if(!h(a)){if(!(typeof a=="string"&&a in this.event_context))return this;var c=this.event_context[a];a=function(a){return c.apply(this.event_context,[a])}}var d=this;return this.waiting?this.callbacks.push(a):(this.wait(),b.setTimeout(function(){var b=a.apply(d,[d.content,d.previous_content]);b!==!1&&d.next(b)},0)),this},wait:function(){this.waiting=!0},next:function(a){this.waiting=!1,typeof a!="undefined"&&(this.previous_content=this.content,this.content=a),this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(b,c,d){var e=this;return this.then(function(){var f,g,i,j;h(c)?(d=c,c={}):c=a.extend({},c),d&&this.then(d);if(typeof b=="string")return i=b.match(/\.json$/)||c.json,f=i&&c.cache===!0||c.cache!==!1,e.next_engine=e.event_context.engineFor(b),delete c.cache,delete c.json,c.engine&&(e.next_engine=c.engine,delete c.engine),f&&(g=this.event_context.app.templateCache(b))?g:(this.wait(),a.ajax(a.extend({url:b,data:{},dataType:i?"json":null,type:"get",success:function(a){f&&e.event_context.app.templateCache(b,a),e.next(a)}},c)),!1);if(b.nodeType)return b.innerHTML;if(b.selector)return e.next_engine=b.attr("data-engine"),c.clone===!1?b.remove()[0].innerHTML.toString():b[0].innerHTML.toString()})},loadPartials:function(a){if(a){this.partials=this.partials||{};for(name in a)this.load(a[name]).then(function(a){this.partials[name]=a})}return this},render:function(a,b,c,d){return h(a)&&!b?this.then(a):this.loadPartials(d).load(a).interpolate(b,a).then(c)},partial:function(a,b){return this.render(a,b).swap()},send:function(){var a=this,b=g(arguments),c=b.shift();return i(b[0])&&(b=b[0]),this.then(function(d){return b.push(function(b){a.next(b)}),a.wait(),c.apply(c,b),!1})},collect:function(b,c,d){var e=this,f=function(){h(b)&&(c=b,b=this.content);var d=[],f=!1;return a.each(b,function(a,b){var g=c.apply(e,[a,b]);return g.jquery&&g.length==1&&(g=g[0],f=!0),d.push(g),g}),f?d:d.join("")};return d?f():this.then(f)},renderEach:function(b,c,d,e){return i(c)&&(e=d,d=c,c=null),this.load(b).then(function(f){var g=this;d||(d=i(this.previous_content)?this.previous_content:[]);if(e)a.each(d,function(a,d){var h={},i=this.next_engine||b;c?h[c]=d:h=d,e(d,g.event_context.interpolate(f,h,i))});else return this.collect(d,function(a,d){var e={},g=this.next_engine||b;return c?e[c]=d:e=d,this.event_context.interpolate(f,e,g)},!0)})},interpolate:function(a,b,c){var d=this;return this.then(function(e,f){!a&&f&&(a=f),this.next_engine&&(b=this.next_engine,this.next_engine=!1);var g=d.event_context.interpolate(e,a,b,this.partials);return c?f+g:g})},swap:function(){return this.then(function(a){this.event_context.swap(a)}).trigger("changed",{})},appendTo:function(b){return this.then(function(c){a(b).append(c)}).trigger("changed",{})},prependTo:function(b){return this.then(function(c){a(b).prepend(c)}).trigger("changed",{})},replace:function(b){return this.then(function(c){a(b).html(c)}).trigger("changed",{})},trigger:function(a,b){return this.then(function(c){typeof b=="undefined"&&(b={content:c}),this.event_context.trigger(a,b)})}}),c.EventContext=function(a,b,d,e,f){this.app=a,this.verb=b,this.path=d,this.params=new c.Object(e),this.target=f},c.EventContext.prototype=a.extend({},c.Object.prototype,{$element:function(){return this.app.$element(g(arguments).shift())},engineFor:function(a){var b=this,c;if(h(a))return a;a=(a||b.app.template_engine).toString();if(c=a.match(/\.([^\.\?\#]+)$/))a=c[1];return a&&h(b[a])?b[a]:b.app.template_engine?this.engineFor(b.app.template_engine):function(a,b){return a}},interpolate:function(a,b,c,d){return this.engineFor(c).apply(this,[a,b,d])},render:function(a,b,d,e){return(new c.RenderContext(this)).render(a,b,d,e)},renderEach:function(a,b,d,e){return(new c.RenderContext(this)).renderEach(a,b,d,e)},load:function(a,b,d){return(new c.RenderContext(this)).load(a,b,d)},partial:function(a,b){return(new c.RenderContext(this)).partial(a,b)},send:function(){var a=new c.RenderContext(this);return a.send.apply(a,arguments)},redirect:function(){var b,c=g(arguments),d=this.app.getLocation(),e=c.length;if(e>1){var f=0,h=[],i=[],j={},k=!1;for(;f<e;f++)typeof c[f]=="string"?h.push(c[f]):(a.extend(j,c[f]),k=!0);b=h.join("/");if(k){for(var l in j)i.push(this.app._encodeFormPair(l,j[l]));b+="?"+i.join("&")}}else b=c[0];this.trigger("redirect",{to:b}),this.app.last_location=[this.verb,this.path],this.app.setLocation(b),(new RegExp(b)).test(d)&&this.app.trigger("location-changed")},trigger:function(a,b){return typeof b=="undefined"&&(b={}),b.context||(b.context=this),this.app.trigger(a,b)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(a){return this.app.swap(a)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(b){return a.parseJSON(b)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}}),a.sammy=b.Sammy=c}(jQuery,window),function(){Galleria.requires(1.25,"This version of Classic theme requires Galleria 1.2.5 or later"),function(a){return Galleria.addTheme({name:"sofia",author:"Halan Pinheiro",defaults:{transition:"slide",thumbCrop:"height",fullscreenCrop:!1,thumbnails:!0,carouselSpeed:3e3,_toggleInfo:!1},init:function(b){var c,d,e,f,g,h,i;return this.exitFullscreen=function(){},this.enterFullscreen(),f=a('<div class="button-set right"><span class="twitter"></span><span class="facebook"></span></div>'),a(".twitter",f).sharrre({share:{twitter:!0},template:'<a class="button icon">t</a>',enableHover:!1,text:"O mundo de sofia! #mundodesofia",click:function(a,b){return a.simulateClick(),a.openPopup("twitter")}}),a(".facebook",f).sharrre({share:{facebook:!0},template:'<a class="button icon">f</a>',enableHover:!1,click:function(a,b){return a.simulateClick(),a.openPopup("facebook")}}),"$('.googleplus', social_buttons).sharrre\n  share:\n    googlePlus: true\n  template: '<a class=\"button icon\">g</a>'\n  url: 'http://halan.github.com/sofia'\n  urlCurl: \"\"\n  enableCounter: false\n  enableHover: false\n  click: (api, options)->\n    api.simulateClick()\n    api.openPopup 'googlePlus'",this.addElement("toolbar"),this.append({container:["toolbar"]}),h=this.$("toolbar"),h.append('<a class="center button icon">:</a>').append(f),this.$("image-nav-right").addClass("icon").text(">"),this.$("image-nav-left").addClass("icon").text("<"),this.$("thumb-nav-right").addClass("icon").text(">"),this.$("thumb-nav-left").addClass("icon").text("<"),g=a("#content-overlay"),e=a(".center.button",h).click(function(){var b;return g.fadeToggle(),a(this).toggleClass("pressed"),b=a("#albums",g),b.imagesLoaded(function(){return b.masonry({columnWidth:106,isFitWidth:!0})})}),this.addElement("info-link","info-close"),this.append({info:["info-link","info-close"]}),d=this.$("info-link,info-close,info-text"),i=Galleria.TOUCH,c=i?"touchstart":"click",this.$("loader,counter").show().css("opacity",.8),i||(this.addIdleState(this.get("image-nav-left"),{left:-50}),this.addIdleState(this.get("image-nav-right"),{right:-50}),this.addIdleState(this.get("counter"),{opacity:0})),b._toggleInfo===!0?d.bind(c,function(){return d.toggle()}):(d.show(),this.$("info-link, info-close").hide()),this.attachKeyboard({escape:function(){return a(".center.button",h).click()}}),this.bind("thumbnail",function(b){if(!!i)return a(b.thumbTarget).css("opacity",this.getIndex()?1:.3);a(b.thumbTarget).css("opacity",.3).parent().hover(function(){return a(this).not(".active").children().stop().fadeTo(100,1)},function(){return a(this).not(".active").children().stop().fadeTo(400,.3)});if(b.index===this.getIndex())return a(b.thumbTarget).css("opacity",1)}),this.bind("loadstart",function(b){return b.cached||this.$("loader").show().fadeTo(200,.4),a(b.thumbTarget).css("opacity",1).parent().siblings().children().css("opacity",.3)}),this.bind("loadfinish",function(b){var c,d;return c=a("#galleria"),d=c.data("photoset"),d&&!c.data("lock-history")&&(c.removeData("lock-history"),window.location.hash="#/set/"+d+"/"+b.index),this.$("loader").fadeOut(200)})}})}(jQuery)}.call(this),function(){var a,b,c;c=c||[],c.push(["_setAccount","UA-28952722-1"]),c.push(["_trackPageview"]),function(){var a,b;return a=document.createElement("script"),a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)}(),b=new Galleria.Flickr,a=void 0,$(function(){var b,c,d,e;return d=$("#content-overlay"),d.append('<br clear="all"/>'),c="http://api.flickr.com/services/rest/?method=",b="2a2ce06c15780ebeb0b706650fc890b2",e="75716207@N02",$.getJSON(c+"flickr.photosets.getList&user_id="+e+"&api_key="+b+"&format=json&jsoncallback=?",function(b){var c;return $(b.photosets.photoset).each(function(){var a,b,c=this;return b="http://farm"+this.farm+".staticflickr.com/"+this.server+"/"+this.primary+"_"+this.secret+"_t.jpg",a=$("<div class='album'><h2>"+this.title._content+"</h2><img src="+b+"></div>").appendTo("#albums"),a.click(function(){return $(".galleria-toolbar .center.button").removeClass("pressed"),d.fadeToggle(function(){return $.sammy().setLocation("#/set/"+c.id+"/0")})})}),c=$(b.photosets.photoset).get(0),a=$.sammy(function(){return this.bind("load-galleria",function(a,b){var c;return c=$("#galleria").data("galleria"),$("#galleria").data("photoset")!==b.id?c=$("#galleria").galleria({show:b.pic,flickr:"set:"+b.id,flickrOptions:{description:!0}}):c.getIndex()!==parseInt(b.pic)&&($("#galleria").data("lock-history",!0),c.show(b.pic)),$("#galleria").data("photoset",b.id)}),this.get("#/set/:id/:pic",function(){return this.trigger("load-galleria",{id:this.params.id,pic:this.params.pic})}),this.get(/.*/,function(){return this.trigger("load-galleria",{id:c.id,pic:0})})}),a.run("#/set/"+c.id+"/0")})})}.call(this)